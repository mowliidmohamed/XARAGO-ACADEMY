<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Xarago Fashion Academy</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navigation -->
<nav class="navbar">
  <div class="logo">XARAGO</div>
  <ul class="nav-links">
    <li><a href="#home">Home</a></li>
    <li><a href="#courses">Courses</a></li>
    <li><a href="#portfolio">Gallery</a></li>
    <li><a href="#about">About</a></li>
    <li><a href="#contact">Contact</a></li>
    <!-- ✅ Enroll Now trigger -->
    <li><a href="#enroll" id="openEnrollBtn" class="cta-mini">Enroll Now</a></li>
    <li><a href="login.html" class="cta-mini">Student Dashboard</a></li>
  </ul>
</nav>

<!-- ✅ Enroll popup overlay (hidden by default) -->
<div id="enrollPopup" class="popup-overlay">
  <div class="popup-content">
    <span class="close-enroll">&times;</span>
    <h2>Enroll in Courses</h2>
    <div class="enroll-grid">
      <div class="enroll-left">
        <h3>Student info</h3>
        <input type="text" placeholder="Full Name">
        <input type="email" placeholder="Email">
        <input type="tel" placeholder="Phone">
      </div>
      <div class="enroll-right">
        <h3>Select courses</h3>
        <div class="course-list">
          <label><input type="checkbox" data-price="450"> Pattern Making & Draping <span>$15</span></label>
          <label><input type="checkbox" data-price="600"> Digital CAD (CLO 3D) <span>$15</span></label>
          <label><input type="checkbox" data-price="350"> Construction & sewing <span>$15</span></label>
          <label><input type="checkbox" data-price="350"> Fashion illustration <span>$15</span></label>
          <label><input type="checkbox" data-price="350"> Fashion styling and brading <span>15</span></label>
          <label><input type="checkbox" data-price="350"> Textile & Fabric Science<span>$15</span></label>
        </div>
        <div class="summary-box">
          <div>Selected:</div>
          <ul id="selectedCourses"></ul>
          <div class="total-row">
            <strong>Total</strong>
            <strong id="totalAmount">$0</strong>
          </div>
        </div>
        <button class="btn-enroll">Complete Registration</button>
      </div>
    </div>
  </div>
</div>

  </header>

  <!-- Curriculum Pillars (six) -->
  <section id="courses" class="pillars">
    <h2>Our Curriculum Pillars</h2>
    <div class="pillar-grid">
      <div class="pillar-card" style="background-image:url('assets/pillars/pattern.jpg')">
        <h3>Pattern Making</h3>
      </div>
      <div class="pillar-card" style="background-image:url('assets/pillars/draping.jpg')">
        <h3>Draping Techniques</h3>
      </div>
      <div class="pillar-card" style="background-image:url('assets/pillars/sewing.jpg')">
        <h3>Sewing Fundamentals</h3>
      </div>
      <div class="pillar-card" style="background-image:url('assets/pillars/cad.jpg')">
        <h3>Digital CAD (CLO 3D)</h3>
      </div>
      <div class="pillar-card" style="background-image:url('assets/pillars/fashion-history.jpg')">
        <h3>Fashion History</h3>
      </div>
      <div class="pillar-card" style="background-image:url('assets/pillars/fabric-science.jpg')">
        <h3>Textile & Fabric Science</h3>
      </div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="about">
    <div class="about-container">
      <div class="about-text">
        <h2>Our Philosophy</h2>
        <p>We don't just teach you how to make clothes. We teach you how to build a brand. Our studio combines Savile Row precision with 3D digital prototyping.</p>
      </div>
      <div class="about-stats">
        <div><span>500+</span><p>Graduates</p></div>
        <div><span>100%</span><p>Hands-on</p></div>
      </div>
    </div>
  </section>

  <!-- Student Work (filterable, fed by student.json) -->
  <section id="portfolio" class="portfolio">
    <h2 class="section-title">Student Work</h2>

    <div class="filter-buttons">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="cad">Digital CAD</button>
      <button class="filter-btn" data-filter="pattern">Pattern Making</button>
      <button class="filter-btn" data-filter="illustration">Illustration</button>
    </div>

    <div class="gallery-grid" id="studentGallery">
      <!-- Populated from student.json via script.js -->
    </div>
  </section>

  <!-- Enrollment section to footer -->
  <section id="enroll" class="enrollment-section">
    <div class="enroll-container">
      <h2 class="section-title">Course Enrollment</h2>
      <div class="form-layout">
        <div class="course-selection">
          <h3>Select Your Modules</h3>

          <label class="course-item">
            <input type="checkbox" name="course" value="15" data-name="Pattern Making & Draping">
            <div class="course-info">
              <strong>Pattern Making & Draping</strong>
              <span>$15</span>
            </div>
          </label>

          <label class="course-item">
            <input type="checkbox" name="course" value="15" data-name="Digital CAD (CLO 3D)">
            <div class="course-info">
              <strong>Digital CAD (CLO 3D)</strong>
              <span>$15</span>
            </div>
          </label>

          <label class="course-item">
            <input type="checkbox" name="course" value="15" data-name="Textile & Fabric Science">
            <div class="course-info">
              <strong>Textile & Fabric Science</strong>
              <span>$15</span>
            </div>
          </label>
        </div>

        <div class="enrollment-summary">
          <h3>Tuition Summary</h3>
          <div id="selectedList">
            <p class="empty-msg">Select a module to calculate tuition.</p>
          </div>
          <div class="total-row">
            <span>Total:</span>
            <span id="totalPrice">$0.00</span>
          </div>
          <input type="email" placeholder="Designer Email Address" id="enroll-email">
          <button type="submit" class="btn-enroll" id="completeRegistrationBtn">Complete Registration</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="contact-section">
    <h2 class="section-title">Visit the XARAGO FASHION ACADEMY</h2>
    <div class="contact-grid">
      <div class="map-container">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.617543812836!2d-73.985428!3d40.748817!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDDCsDQ0JzU1LjciTiA3M8KwNTknMDcuNSJX!5e0!3m2!1sen!2sus!4v1625000000000"
          width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy">
        </iframe>
      </div>
      <div class="contact-info">
        <h3>XARAGO HQ</h3>
        <p>123 Fashion Ave, Boqol-jire District<br>Hargeisa BJ 10001</p>
        <p><strong>Email:</strong> XARAGOFA@gmail.com</p>
        <p><strong>Phone:</strong> +252 (63) 4197374</p>
      </div>
    </div>
  </section>

  <!-- Newsletter popup (single, deduplicated) -->
  <div id="newsletterPopup" class="popup-overlay">
    <div class="popup-content">
      <span class="close-popup">&times;</span>
      <div class="popup-flex">
        <div class="popup-image" style="background-image: url('assets/popup-img.jpg');"></div>
        <div class="popup-text">
          <div id="popup-form-content">
            <span class="popup-label">The Atelier Journal</span>
            <h2>Elevate Your Craft</h2>
            <p>Join 5,000+ designers. Receive our weekly guide on fabric trends and CAD secrets.</p>

            <!-- Use your Formspree endpoint -->
            <form id="newsletterForm" action="https://formspree.io/f/your_form_id" method="POST">
              <input type="email" name="email" placeholder="Your email address" required>
              <button type="submit" class="btn-subscribe">Join Now</button>
            </form>
          </div>

          <div id="popup-success-content" style="display: none; text-align: center;">
            <div style="font-size: 3rem; color: #1a1a1a; margin-bottom: 20px;">✓</div>
            <h2>Welcome to the Studio</h2>
            <p>Your subscription is confirmed. Check your inbox for your first designer guide shortly.</p>
            <button class="btn-subscribe" id="closeNewsletterSuccess">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="main-footer">
  <div class="footer-content">
    <div class="footer-logo">THE ATELIER</div>
    <div class="social-picture-links">
      <a href="#"><img src="assets/icon-ig.png" alt="Instagram"></a>
      <a href="#"><img src="assets/icon-pin.png" alt="Pinterest"></a>
      <a href="#"><img src="assets/icon-fb.png" alt="Facebook"></a>
      <a href="#"><img src="assets/icon-wh.png" alt="WhatsApp"></a>
    </div>
    <p class="footer-tagline">Where tradition meets the future of design.</p>
    <!-- ✅ Newsletter trigger button -->
    <button class="newsletter-btn" id="openNewsletterBtn">Subscribe to Newsletter</button>
  </div>
</footer>

<!-- ✅ Newsletter popup overlay (hidden by default) -->
<div id="newsletterPopup" class="popup-overlay">
  <div class="popup-content">
    <span class="close-popup">&times;</span>
    <div class="popup-flex">
      <div class="popup-image" style="background-image: url('assets/popup-img.jpg');"></div>
      <div class="popup-text">
        <span class="popup-label">The Atelier Journal</span>
        <h2>Elevate Your Craft</h2>
        <p>Join 5,000+ designers. Receive our weekly guide on fabric trends and CAD secrets.</p>
        <form id="newsletterForm">
          <input type="email" placeholder="Your email address" required>
          <button type="submit" class="btn-subscribe">Join Now</button>
        </form>
        <p class="popup-footer">Strictly inspiration. No spam.</p>
      </div>
    </div>
  </div>
</div>

  <!-- Course modal -->
  <div id="courseModal" class="modal-overlay">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <div class="modal-body">
        <div class="modal-image" id="modalImage"></div>
        <div class="modal-info">
          <h2 id="modalTitle">Course Title</h2>
          <div class="modal-meta">
            <span id="modalLevel">Level</span> | <span id="modalDuration">Duration</span>
          </div>
          <hr>
          <h3>Syllabus Overview</h3>
          <ul id="modalSyllabus"></ul>
          <div class="modal-footer-action">
            <span class="modal-price" id="modalPrice">$0.00</span>
            <a href="#enroll" class="btn-enroll-now" id="modalEnrollBtn">Enroll in this Module</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Enrollment popup (opens from navbar “Enroll Now”) -->
  <div id="enrollPopup" class="popup-overlay">
    <div class="popup-content">
      <span class="close-enroll">&times;</span>
      <h2>Enroll in Courses</h2>
      <div class="enroll-grid">
        <div class="enroll-left">
          <h3>Student info</h3>
          <input type="text" id="studentName" placeholder="Full Name">
          <input type="email" id="studentEmailField" placeholder="Email">
          <input type="tel" id="studentPhone" placeholder="Phone">
        </div>
        <div class="enroll-right">
          <h3>Select courses</h3>
          <div class="course-list" id="popupCourseList">
            <label><input type="checkbox" data-price="450" value="Pattern Making & Draping">Pattern Making & Draping <span>$450</span></label>
            <label><input type="checkbox" data-price="600" value="Digital CAD (CLO 3D)">Digital CAD (CLO 3D) <span>$600</span></label>
            <label><input type="checkbox" data-price="350" value="Textile & Fabric Science">Textile & Fabric Science <span>$350</span></label>
          </div>
          <div class="summary-box">
            <div>Selected:</div>
            <ul id="popupSelectedCourses"></ul>
            <div class="total-row">
              <strong>Total</strong>
              <strong id="popupTotalAmount">$0</strong>
            </div>
          </div>
          <button class="btn-enroll" id="confirmEnrollBtn">Complete Registration</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts: your existing logic + minimal hooks -->
  <script src="script.js"></script>
  <script>
    // Navbar Enroll Now popup
    const openEnrollBtn = document.getElementById('openEnrollBtn');
    const enrollPopup = document.getElementById('enrollPopup');
    const closeEnrollBtn = document.querySelector('#enrollPopup .close-enroll');

    openEnrollBtn.addEventListener('click', (e) => {
      e.preventDefault();
      enrollPopup.classList.add('active');
      enrollPopup.style.display = 'flex';
    });
    closeEnrollBtn.addEventListener('click', () => {
      enrollPopup.classList.remove('active');
      enrollPopup.classList.add('fade-out');
      setTimeout(() => {
        enrollPopup.style.display = 'none';
        enrollPopup.classList.remove('fade-out');
      }, 300);
    });

    // Popup course price calculation
    const popupCourseList = document.getElementById('popupCourseList');
    const popupSelectedCourses = document.getElementById('popupSelectedCourses');
    const popupTotalAmount = document.getElementById('popupTotalAmount');

    function updatePopupSummary() {
      const checks = Array.from(popupCourseList.querySelectorAll('input[type="checkbox"]'));
      const chosen = checks.filter(c => c.checked);
      popupSelectedCourses.innerHTML = chosen.map(c => `<li>${c.value}</li>`).join('');
      const total = chosen.reduce((sum, c) => sum + Number(c.dataset.price || 0), 0);
      popupTotalAmount.textContent = `$${total}`;
    }
    popupCourseList.addEventListener('change', updatePopupSummary);

    // Complete Registration (hook into your existing backend flow if needed)
    document.getElementById('confirmEnrollBtn').addEventListener('click', () => {
      updatePopupSummary();
      // You can replace this alert with your success overlay or submission
      alert('Registration complete. Total: ' + popupTotalAmount.textContent);
    });

    // Newsletter popup
    const newsletterPopup = document.getElementById('newsletterPopup');
    const openNewsletterBtn = document.getElementById('openNewsletterBtn');
    const closeNewsletterBtns = newsletterPopup.querySelectorAll('.close-popup, #closeNewsletterSuccess');

    openNewsletterBtn.addEventListener('click', () => {
      newsletterPopup.classList.add('active');
      newsletterPopup.style.display = 'flex';
    });
    closeNewsletterBtns.forEach(btn => btn.addEventListener('click', () => {
      newsletterPopup.classList.remove('active');
      newsletterPopup.classList.add('fade-out');
      setTimeout(() => {
        newsletterPopup.style.display = 'none';
        newsletterPopup.classList.remove('fade-out');
      }, 300);
    }));

    // Student Work: load from student.json (keeps your original approach)
    document.addEventListener('DOMContentLoaded', async () => {
      const grid = document.getElementById('studentGallery');
      try {
        const res = await fetch('student.json');
        const items = await res.json();
        grid.innerHTML = items.map(item => `
          <div class="gallery-item" data-category="${item.category}">
            <img src="${item.image}" alt="${item.title}">
            <div class="item-overlay">${item.subtitle}</div>
          </div>
        `).join('');
      } catch (e) {
        // Fallback to your earlier static examples if JSON fails
        grid.innerHTML = `
          <div class="gallery-item" data-category="cad">
            <img src="assets/gallery-1.jpg" alt="Student CAD Work">
            <div class="item-overlay">3D Evening Gown Render</div>
          </div>
          <div class="gallery-item" data-category="pattern">
            <img src="assets/gallery-2.jpg" alt="Pattern Drafting">
            <div class="item-overlay">Technical Jacket Draft</div>
          </div>
          <div class="gallery-item" data-category="illustration">
            <img src="assets/gallery-3.jpg" alt="Fashion Illustration">
            <div class="item-overlay">Mixed Media Croquis</div>
          </div>
          <div class="gallery-item" data-category="cad">
            <img src="assets/gallery-4.jpg" alt="CLO3D Simulation">
            <div class="item-overlay">Digital Fabric Simulation</div>
          </div>
        `;
        console.warn('student.json not loaded:', e);
      }

      // Filtering logic
      const filterBtns = document.querySelectorAll('.filter-btn');
      filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          filterBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          const filter = btn.dataset.filter;
          document.querySelectorAll('.gallery-item').forEach(item => {
            const match = filter === 'all' || item.dataset.category === filter;
            item.style.display = match ? 'block' : 'none';
          });
        });
      });
    });
  </script>
</body>
</html>